
// DllMain.cpp
//============================================================================//
// 概要：なし。
// 補足：なし。
//============================================================================//

#include "ZipFile.h"


/******************************************************************************/
//		定義
/******************************************************************************/

#define  TYPE_READHEADER	0x001
#define  TYPE_WRITEHEADER	0x002


/******************************************************************************/
//		エクスポート関数郡
/******************************************************************************/
// DLL のタイプを表す
//============================================================================//
// 概要：なし。
// 補足：なし。
//============================================================================//

UINT WINAPI GetDllType()
{
	return TYPE_READHEADER;
}


/******************************************************************************/
// ファイルパス設定
//============================================================================//
// 概要：なし。
// 補足：この DLL では対応できないファイルのときは FALSE を返す。
//============================================================================//

BOOL WINAPI ReadHeader(PCTSTR pszBuf)
{
	ZipFile* pZip = ZipFile::GetInstance(pszBuf);
	return pZip->_ReadHeader();
}


/******************************************************************************/
// ファイルの数を教える
//============================================================================//
// 概要：なし。
// 補足：なし。
//============================================================================//

UINT WINAPI GetFileCount()
{
	ZipFile* pZipFile = ZipFile::GetInstance();
	if(!pZipFile)
	{
		return 0;
	}

	return pZipFile->GetChildCount();
}


/******************************************************************************/
// ファイル名を教える
//============================================================================//
// 概要：なし。
// 補足：なし。
//============================================================================//

PCTSTR WINAPI GetFileName(UINT uiIndex)
{
	ZipFile* pZipFile = ZipFile::GetInstance();
	if(!pZipFile)
	{
		return "";
	}

	return pZipFile->GetChildName(uiIndex).c_str();
}


/******************************************************************************/
// ファイルの始点を教える
//============================================================================//
// 概要：なし。
// 補足：なし。
//============================================================================//

UINT WINAPI GetFileStartPoint(UINT uiIndex)
{
	ZipFile* pZipFile = ZipFile::GetInstance();
	if(!pZipFile)
	{
		return 0;
	}

	return pZipFile->GetChildStartPoint(uiIndex);
}


/******************************************************************************/
// ファイルの終点を教える
//============================================================================//
// 概要：なし。
// 補足：なし。
//============================================================================//

UINT WINAPI GetFileEndPoint(UINT uiIndex)
{
	ZipFile* pZipFile = ZipFile::GetInstance();
	if(!pZipFile)
	{
		return 0;
	}

	return pZipFile->GetChildEndPoint(uiIndex);
}


/******************************************************************************/
// 圧縮されているか
//============================================================================//
// 概要：なし。
// 補足：なし。
//============================================================================//

BOOL WINAPI IsCompressed(UINT uiIndex)
{
	ZipFile* pZipFile = ZipFile::GetInstance();
	if(!pZipFile)
	{
		return 0;
	}

	return pZipFile->_IsCompressed(uiIndex);
}


