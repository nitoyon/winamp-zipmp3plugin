=====================================================================
【タイトル】 ZIP.MP3 再生プラグイソ。 ver 0.3.6b
【ファイル】 gen_zipalbum.lzh
【作成月日】 03/09/15
【カテゴリ】 マルティメディア
【制 作 者】 にとよん
【動作環境】 日本語版Windows98, Windows2000
【配布形態】 フリーウェア
【 E-Mail 】 soft@nitoyon.com
【HomePage】 http://www.nitoyon.com/
【転　　載】 事前に連絡ください。
【著 作 権】 (c) にとよん '03
=====================================================================

ご利用前に以下の文章をお読みください。


【概要】
複数の MP3 ファイルを無圧縮 zip 形式で固めることで、ＣＤアルバムをファ
イルとして保存することができます。この形式は、MP3 プレイヤーでそのまま
聞くことができますが、zip のままでは曲の情報を取得しにくいのが難点です。

そこで、このプラグインを使ってみてはいかがでしょうか。Winamp にプラグイ
ンとしてインストールすれば、曲の一覧を取得したり頭出ししたりできます。


【インストール】
Winamp 2.X に対応しています。それ以外のバージョンでは正常に動作しない
ので注意して下さい。

インストールは、Winamp が起動していない状態で行ってください。
まずは、gen_zipalbum.lzh を解凍してください。
Winamp が入っているフォルダの下の Pluginsフォルダに gen_zipalbum.dll 
を入れて下さい。Plugins フォルダの gen_zipalbum フォルダを作成し、
zip_r.dll を入れてください。
gen_zipalbum.lzh をディレクトリつきで解凍すると楽できます。

　　+ winamp/
　　　　 + Plugins/
　　　　　　　+ gen_zipalbum
　　　　　　　　　　　zip_r.dll
　　　　　　　  gen_zipalbum.dll

以上で終了です。Winamp を起動して、怪しいウインドウが画面に現れたら
インストール終了です。


【アンインストール】
ファイルごと削除して下さい。
設定は DLL と同じフォルダに gen_zipalbum.ini として保存されます。
レジストリやシステムフォルダには保存しません。


【アップグレード】
基本的に、DLL を上書きするだけで OK です。
上書きは、Winamp が起動していないときに行ってください。


【簡単な使い方】
起動したら、アルバム再生用のウインドウが立ち上がります。
試しに、.zip.mp3 のファイルを再生してみて下さい。
いい感じに一覧が出てきましたよね？

それぞれの曲の再生時間は、リストの右下の方の小窓を見て下さい。
クリックすると、カウントダウンとカウントアップを切り替えられます。

曲の頭出しは、リストをダブルクリックしたり右下のちいちゃなボタンを
使って行えます。キーボードの「,」や「.」キーでも頭だしできます。


設定はプラグインの設定で行えます。
設定は意味が分かる人だけ行ってください。


【CUE ファイルの扱いについて】
**** 注意 ************************************************
* ver 0.3.4b では、CUE ファイルをサポートしていません。  *
**********************************************************

ver 0.2.9b からは、試験的に CUE ファイルを読みとるようにしてみました。
（VBR の人のための機能であり、Entire + cue に対応したわけではないので
  勘違いなさらぬよう。）

ZIP.MP3 ファイルの中に CUE ファイル（拡張子が.cue）があると、各曲の長さを
CUE ファイルから読みとります。ただし、次のような制限があります。

・CUE ファイル中の INDEX 01 XX:XX:XX の数だけ、ZIP の中に対応する mp3 が必要。
・最後の曲の長さが正しく表示されない。

１つ目が分かりにくいかもしれないけど、無圧縮ZIP中の曲数と、CUE ファイル中に
記述されている曲数が一致していなければならない、という感じです。


でも、微妙に（10秒弱??）ずれるらしいので、微妙な機能だなぁ・・・。


【既知の不具合】
・再生中の曲を Winamp のリストから削除すると、次の曲の情報が表示される。
・in_mpg123.dll と併用した場合に頭出しがおかしいなどの弊害がある。


【FAQ】
Ｑ．頭出しがされない
Ａ．次のことを確認せよ！
　・in_mpg123.dll などの外部デコーダーを使っている。in_mp3.dll 推奨
　・VBR の MP3 ファイルが含まれている
　・MP3 ファイル中の音楽に関係のないデータ（タグ情報など）のサイズが大きい
　（現在は曲の長さを ファイルサイズ÷ビットレートで算出しているだけです）

Ｑ．曲が変わったときに、リストが現在の曲をハイライトしていない
Ａ．ZIP.MP3プラグイソ。を導入した後に、shoutcastプラグインを導入するとそのよ
　　うな状況になるらしい（私の環境では未確認）。shoutcast プラグインからイン
　　ストールするとよいようです。 

Ｑ．単曲リピートとアルバム内リピートはどうすればよい？
Ａ．ZIP.MP3ウインドウで右クリックをして表示されるメニューから選択してください。
    あ、曲名の上じゃないところで右クリックですよ。

Ｑ．単曲リピートやアルバム内リピート、ランダム再生がうまくいかない。
Ａ．プレイリストの最後の曲で、Winamp のリピートかランダムのチェックが入ってい
    ない場合にうまくいかないことがあります。

Ｑ．ランダム再生の種類の違いが分からない。
Ａ．「アルバム内で永久ランダム」は１つのアルバムの中でずっとランダム再生しま
    す。一通りアルバムの中の曲を再生し終わったあとにも、同じアルバムの中で、
    ランダム再生を行います。（このときに、同じ曲を続けて再生するかもしれません）    「アルバム内でランダム[１順で次へ]」はアルバム内の曲をランダムで再生しま
    すが、アルバム内の全ての曲を再生し終わったら、Winamp プレイリストの次の曲
    へ移動します。

Ｑ．ランダム再生中って挙動怪しくない？
Ａ．はい、色々と怪しいです。怪しい例を挙げておきます。
    ・ZIP.MP3 ウインドウで特定の曲を選択したとき
        選択した曲が再生されますが、プラグインが記憶している既に再生した曲の
        リストにその曲は加わりません。
        それゆえ、「アルバム内でランダム[１順で次へ]」にしているときは、再度
        その曲が再生されるでしょう。

    ・「前の曲」を利用できない
        メニューやショートカットキーで「前の曲」を押しても、アルバムの中で
        前に再生していた曲に移動できません。

    他にも、いろいろ怪しいことがあるかもしれません。なるべくランダム再生中は
    操作を行わないことをお薦めします。

Ｑ．異常終了した！
Ａ．よくするので気にしないでください。ソースを公開してるので、訂正してくれる
    とうれしいな。


【Tips】
ver0.2.2b からのファイルをミニブラウザで表示する機能を使って、シングル曲と
ジャケットを無圧縮 ZIP で固めておけば、シングル曲のジャケットを見られる。
意外と(ﾟдﾟ)ｳﾏｰ


【著作権など】
このソフトは、フリーウェアです。

このソフトを使用した事における、いかなる損害も、作者はその責任を一切
負わないものとします。

雑誌などへの掲載や、その他再配布などを行う場合は、配布されているアーカイブ
の状態でにしておいてください。この場合、作者に必ずご連絡ください。

ただし、zip_r.dll に関しては、ご自由に再配布してくださってかまいません。


【その他】
機能追加の要望は、まだまだ追加してもしきれないぐらいあると思います。
ざっと、こんなところでしょうか。
|-----------------------------------------------|
|　　項目　　　　　　　　　　　 |　めんどくささ |
|-----------------------------------------------|
|・Winamp上での 無圧縮ZIP作成　 |　　　　50　　 |
|・ID3 タグの編集　　　　　　　 |　　　1000　　 |
|・歌詞を表示　　　　　　　　　 |　　　1000　　 |
|-----------------------------------------------|

バグ報告・要望・感想などはこちらで。
アルバムMP3は無圧縮アーカイブして共有しようPart11 [2ch.net]
http://tmp.2ch.net/test/read.cgi/download/1062950064/l50


対応しない要望
・外部ソフトウェア（SSTPを受け取るソフトやLITESTEPなど）からの再生中の曲名表示
・VBR の対応

ソース公開してるから、出来る人がやってください。
変更点をコミットして頂ければ、正式版にも組み込みたいとは思います。


【更新略歴】
03/09/15 ver0.3.6b
~~~~~~~~~~~~~~~~~~
機能追加
・「ファイル情報」を表示できるようにする。
・アプリケーションキーで、右クリックメニューを表示できるようにする。

修正
・右クリックメニューの「移動」に曲リストが表示されなくなっていたのを修正。


03/09/14 ver0.3.5b
~~~~~~~~~~~~~~~~~~
機能追加
・右クリックメニューにランダム再生機能を追加。
・ZIP.MP3 ウインドウで、再生中の曲が表示されるよう自動的にスクロールするよう
　にした。
・「場所を指定して解凍」を可能にする。

修正
・曲の長さを計算する部分で、ID3 タグの長さを考慮に入れるようにした。
　頭だしがより正確になったはず。


03/08/28 ver0.3.4b
~~~~~~~~~~~~~~~~~~
機能追加
・右クリックメニューに単曲リピートとアルバム内リピート機能を追加。
・右クリックメニューに移動を追加。折りたたんだときでも曲名一覧を表示
　できるようになった。
・プラグインウインドウで Alt+F4 を押せば Winamp を終了できるようにする。

修正
・誤字修正（内臓→内蔵）


03/06/27 ver0.3.3b
~~~~~~~~~~~~~~~~~~
機能追加
・透明度を SexyFont と同じにする設定項目を追加
・キーボード ショートカットの一覧を表示するようにする

修正
・Windows 98 でプラグインとして認識されないバグをつぶす


03/06/23 ver0.3.2b
~~~~~~~~~~~~~~~~~~
機能追加
・ウインドウを半透明化する機能（Windows 2000/XP のみ）
・読み取り DLL のうち、存在しない DLL が分かりやすいようにする

修正
・誤字修正（内臓→内蔵）


03/06/11 ver0.3.1a
~~~~~~~~~~~~~~~~~~
修正
・デフォルトの読み取り DLL 名が r_zip.dll になっていたのを zip_r.dll
　に修正
・読み取り DLL のチェックが効果を発揮していたのを修正


03/06/10 ver0.3.0a
~~~~~~~~~~~~~~~~~~
機能追加
・アーカイブの読み取りを外部 DLL で行えるようにする
・設定ダイアログを一新して、設定できる項目を増やす

修正
・アプリケーション名を「ZIP.MP3 再生プラグイソ。(Winamp用)」で統一
・プレイリストウインドウでキーボードがきかない問題をつぶす


03/05/11 ver0.2.15b
~~~~~~~~~~~~~~~~~~~
機能追加
・設定で、フォントサイズを変更できるようにする。

修正
・設定で、フォントを一覧から選べるようにする。
・シークバーをドラッグしたとき、マウスの位置を中心にする。


03/05/04 ver0.2.14b
~~~~~~~~~~~~~~~~~~~
機能追加
・再生中の曲の位置のシークバーを移動できるようにする。
・ZIP.MP3ウインドウのフォントを変更できるようにする。

修正
・停止中にアルバム中の曲をダブルクリックすると、その曲から再生するようにする。
・ZIP.MP3ウインドウで「，」「．」キーを押しても、アルバム中の曲送り・曲戻しを
　可能にする。

バグフィックス
・Skin フォルダに gen_zipalbum フォルダがあっても、うまくそちらを優先的に
　読めていなかった問題を修正。
・その他、少し。


03/04/28 ver0.2.13b
~~~~~~~~~~~~~~~~~~~
機能追加
・「，」「．」キーで、アルバム中の曲送り・曲戻しをできるようにした。
・フォーカスの有無を正しく表示するようにした。

バグフィックス
・折りたたんだ状態で、下辺が Winamp ウインドウに正しくくっつくようにした。
・ZIP.MP3 以外を再生中にウインドウを表示していると不具合がいろいろ起こった
　を修正。


03/04/20 ver0.2.12b
~~~~~~~~~~~~~~~~~~~
機能追加
・再生中の曲の位置をスライドで表示するようにする。
　スライドは移動できないよ。表示するだけだよ。
・Skin フォルダに gen_zipalbum フォルダがあると、その中のスキンファイルを
　優先的に読みとるようにする。


03/04/11 ver0.2.11b
~~~~~~~~~~~~~~~~~~~
バグフィックス
・折りたたんだ状態で、ZIP 以外のファイルを選択したり何も選択していないままだと
  強制終了になる問題を抹殺。


03/04/11 ver0.2.10b
~~~~~~~~~~~~~~~~~~~
機能追加
・ウインドウを折りたためるようにする。


03/03/16 ver0.2.9b
~~~~~~~~~~~~~~~~~~
機能追加
・CUE シートを読みとる機能を試験的に追加。

バグフィックス
・一度再生した曲がファイルがロックされてしまう問題を抹殺。


03/02/22 ver0.2.8b
~~~~~~~~~~~~~~~~~~
バグフィックス
・ID3v2 タグだけの場合に、タグ情報が表示されない問題を抹殺。


03/02/18 ver0.2.7b
~~~~~~~~~~~~~~~~~~
機能追加
・ID3v2 タグに対応。(special thanks to "mp3infp")


03/02/02 ver0.2.6b
~~~~~~~~~~~~~~~~~~
機能追加
・各ファイルの解凍をサポート
　（場所を指定して解凍は謎のバグによりおあずけ）
・起動時、ZIP.MP3ウインドウの表示位置が異常な場合、画面内に収まる
　ようにする。

バグフィックス
・プレイリストを全消去したときに落ちるのを回避。
・ZIP.MP3ウインドウに & が正しく表示されないのを修正。


03/01/05 ver0.2.5b
~~~~~~~~~~~~~~~~~~
機能追加
・ZIP.MP3 ウインドウに各MP3の再生時間を表示。

バグフィックス
・「ファイル一覧に表示する文字」のカスタマイズが反映されない場合があった
　のを修正。
・スクロールバーが右端 1 ドットだけスクロールしてくれない問題を回避。


03/01/03 ver0.2.4b
~~~~~~~~~~~~~~~~~~
機能追加
・ID3 v1 タグのアーティスト名が異なる場合の表示方法をカスタマイズ可能にする
　コンピレーションアルバムやトリビュートアルバムで威力を発揮するはず

バグフィックス
・ファイルを開いたままになるバグを潰した（はず）
・MP3 のフレーム探索アルゴリズムの不具合を回避。（417さんサンクス）


02/12/31 ver0.2.3b
~~~~~~~~~~~~~~~~~~
バグフィックス
・「MiniBrowser で表示」で、先頭4KBしか表示できないバグを解消
・拡張子が .MP3 のファイルもMP3として解釈して頭出しをする


02/12/31 ver0.2.2b
~~~~~~~~~~~~~~~~~~
機能追加
・ZIP.MP3 ウインドウを Winamp にひっつける
　ZIP.MP3 ウインドウが Winamp にくっついているときは Winamp と
　同時に動く
・曲を右クリックしたときのメニューに「MiniBrowser で表示」を追加

修正
・ホットキーを Alt + M に固定。グローバルホットキーを止める。
　ホットキーを押して表示したときに ZIP.MP3 ウインドウにフォーカスを移す

バグフィックス
・ID3 タグの末尾に空白が入る問題を潰す
・どのファイルも開いていないときに、ZIP.MP3 ウインドウの再生ボタンを
　押すと落ちる問題を回避


02/12/28 ver0.2.1b
~~~~~~~~~~~~~~~~~~
機能追加
・マウスホイールでリストをスクロール可能に
・デフォルトのスキン用ビットマップを DLL の中に埋め込む
・ウインドウの表示/非表示を切り替えるホットキーを設定可能に

バグフィックス
・選択中のスキンが Pledit.bmp や Text.bmp の情報を持っていない場合は
　デフォルトのスキンを使うように変更
・存在しないファイル（ストリーミングも含む）で落ちるのを回避。
・リソースリーク対応（たぶん）


02/12/28 ver0.2.0b
~~~~~~~~~~~~~~~~~~
機能追加
・リストのスクロール
・ダブルクリックでの頭出し
・リストの表示形式の選択 (SuperTagEditer風)
・Winamp のフォントサイズを引き継ぐようにする
・ちらつき防止
・スキン変更時に即時対応

バグフィックス
・MP3 のフレーム探索アルゴリズムの不具合を回避。


02/12/26 ver0.1.1b
~~~~~~~~~~~~~~~~~~
機能追加
・頭出し機能(せせこましいボタンをおして頭出ししてねバージョン)

バグフィックス
・プラグインのウインドウで×を押しても消えないのを潰す。


02/12/24 ver0.1.0b
~~~~~~~~~~~~~~~~~~
・とりあえず作成。
